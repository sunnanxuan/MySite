{% extends 'layout/user.html' %}

{% block nav %}
    <ul class="nav nav-tabs">
        <li role="presentation" class="active"><a href="{% url 'blog:my_posts' %}">博客</a></li>
        <li role="presentation"><a href="{% url 'blog:favorited_posts' %}">收藏</a></li>
        <li role="presentation"><a href="{% url 'blog:liked_posts' %}">赞过</a></li>
        <li role="presentation"><a href="{% url 'blog:commented_posts' %}">评论过</a></li>
    </ul>
{% endblock %}

{% block blogs %}
    <div class="container">
        <!-- 显示博客内容 -->
        {% if posts %}
            <ul>
                {% for post in posts %}
                    <li>
                        <a href="{% url 'blog:post_detail' post.id %}">{{ post.title }}</a>
                        <!-- 添加编辑和删除操作 -->
                        <a href="#" class="btn btn-primary btn-sm ml-2">编辑</a>
                        <button type="button" class="btn btn-danger btn-sm ml-2" data-toggle="modal" data-target="#deleteModal-{{ post.id }}">删除</button>

                        <!-- 删除确认模态框 -->
                        <div class="modal fade" id="deleteModal-{{ post.id }}" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h4 class="modal-title" id="deleteModalLabel">确认删除博客？</h4>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        删除后无法恢复。
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                                        <form method="post" action="{% url 'blog:delete_post' post.id %}">
                                            {% csrf_token %}
                                            <button type="submit" class="btn btn-danger">确认删除</button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>你还没有发布任何博客。</p>
        {% endif %}
    </div>
{% endblock %}
